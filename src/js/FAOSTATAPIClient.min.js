define(["jquery","loglevel","q","amplify"],function(a,b,c){"use strict";function d(){this.CONFIG={base_url:"http://fenixservices.fao.org/faostat/api/v1/",mode:"@@mode",lang:"en",log:!1}}return d.prototype.config=function(b){this.CONFIG=a.extend(!0,{},this.CONFIG,b||{})},d.prototype.rankings=function(b){var d=a.extend(!0,{},this.CONFIG,b||{});if(d=this.apply_rankings_defaults(d),this.is_valid_rankings(d)){for(var e=this.CONFIG.base_url+d.lang+"/rankings/",f=["base_url","lang"],g=!1,h=!0,i=this,j=a.extend(!0,{},b,{datasource:d.datasource,output_type:d.output_type,domain_codes:d.domain_codes,List1Codes:d.List1Codes,List2Codes:d.List2Codes,List3Codes:d.List3Codes,List4Codes:d.List4Codes,List5Codes:d.List5Codes,List6Codes:d.List6Codes,List7Codes:d.List7Codes,filter_list:d.filter_list,rank_type:d.rank_type,limit:d.limit}),k=0;k<f.length;k++)delete j[f[k]];g===!0&&a.each(j,function(a,b){Array.isArray(b)&&(j[a]=b.join(","))});var l=JSON.stringify(a.extend({url:e},j)),m=this.store(l);return void 0===m?c(a.ajax({url:e,traditional:h,data:j,type:"POST"})).then(function(a){try{i.store(l,a)}catch(b){}return a}):c.when(m)}throw 400},d.prototype.is_valid_rankings=function(a){var b,c=["datasource","output_type","lang","domain_codes","List1Codes","List2Codes","List3Codes","List4Codes","List5Codes","List6Codes","List7Codes","filter_list","rank_type","limit"];for(b=0;b<c.length;b+=1)if(void 0===a[c[b]])throw'Parameter "'+c[b]+'" is undefined. Please check your request.';return!0},d.prototype.apply_rankings_defaults=function(a){var b,c,d=["datasource","output_type","lang","domain_codes","List1Codes","List2Codes","List3Codes","List4Codes","List5Codes","List6Codes","List7Codes","filter_list","rank_type","limit"],e={output_type:"objects",lang:"en",rank_type:"ASC",limit:"5"};for(b=0;b<Object.keys(e).length;b+=1)"[]"===e[Object.keys(e)[b]]&&(e[Object.keys(e)[b]]=[]);for(b=0;b<d.length;b+=1){c=d[b];try{a[c]=void 0!==a[c]?a[c]:e[c]}catch(f){}}return a},d.prototype.data_old=function(b){var d=a.extend(!0,{},this.CONFIG,b||{});if(d=this.apply_data_old_defaults(d),this.is_valid_data_old(d)){for(var e=this.CONFIG.base_url+d.lang+"/data/",f=["base_url","lang"],g=!1,h=!0,i=this,j=a.extend(!0,{},b,{datasource:d.datasource,output_type:d.output_type,pivot:d.pivot,domain_codes:d.domain_codes,decimal_places:d.decimal_places,filters:d.filters,null_values:d.null_values,group_by:d.group_by,order_by:d.order_by,operator:d.operator,page_size:d.page_size,limit:d.limit,page_number:d.page_number,show_codes:d.show_codes,show_flags:d.show_flags,show_unit:d.show_unit}),k=0;k<f.length;k++)delete j[f[k]];g===!0&&a.each(j,function(a,b){Array.isArray(b)&&(j[a]=b.join(","))});var l=JSON.stringify(a.extend({url:e},j)),m=this.store(l);return void 0===m?c(a.ajax({url:e,traditional:h,data:JSON.stringify(j),contentType:"application/json",type:"POST"})).then(function(a){try{i.store(l,a)}catch(b){}return a}):c.when(m)}throw 400},d.prototype.is_valid_data_old=function(a){return!0},d.prototype.apply_data_old_defaults=function(a){var b,c,d=["lang","data_bean"],e={lang:"en"};for(b=0;b<Object.keys(e).length;b+=1)"[]"===e[Object.keys(e)[b]]&&(e[Object.keys(e)[b]]=[]);for(b=0;b<d.length;b+=1){c=d[b];try{a[c]=void 0!==a[c]?a[c]:e[c]}catch(f){}}return a},d.prototype.databean=function(b){var d=a.extend(!0,{},this.CONFIG,b||{});if(d=this.apply_databean_defaults(d),this.is_valid_databean(d)){for(var e=this.CONFIG.base_url+d.lang+"/data/bean/",f=["base_url","lang"],g=!1,h=!0,i=this,j=a.extend(!0,{},b,{datasource:d.datasource,output_type:d.output_type,pivot:d.pivot,domain_codes:d.domain_codes,decimal_places:d.decimal_places,List1Codes:d.List1Codes,List2Codes:d.List2Codes,List3Codes:d.List3Codes,List4Codes:d.List4Codes,List5Codes:d.List5Codes,List6Codes:d.List6Codes,List7Codes:d.List7Codes,List1AltCodes:d.List1AltCodes,List2AltCodes:d.List2AltCodes,List3AltCodes:d.List3AltCodes,List4AltCodes:d.List4AltCodes,List5AltCodes:d.List5AltCodes,List6AltCodes:d.List6AltCodes,List7AltCodes:d.List7AltCodes,null_values:d.null_values,group_by:d.group_by,order_by:d.order_by,operator:d.operator,page_size:d.page_size,limit:d.limit,page_number:d.page_number,show_codes:d.show_codes,show_flags:d.show_flags,show_unit:d.show_unit}),k=0;k<f.length;k++)delete j[f[k]];g===!0&&a.each(j,function(a,b){Array.isArray(b)&&(j[a]=b.join(","))});var l=JSON.stringify(a.extend({url:e},j)),m=this.store(l);return void 0===m?c(a.ajax({url:e,traditional:h,data:j,type:"POST"})).then(function(a){try{i.store(l,a)}catch(b){}return a}):c.when(m)}throw 400},d.prototype.is_valid_databean=function(a){var b,c=["datasource","output_type","lang","pivot","domain_codes","decimal_places","List1Codes","List2Codes","List3Codes","List4Codes","List5Codes","List6Codes","List7Codes","List1AltCodes","List2AltCodes","List3AltCodes","List4AltCodes","List5AltCodes","List6AltCodes","List7AltCodes","null_values","group_by","order_by","operator","page_size","limit","page_number","show_codes","show_flags","show_unit"];for(b=0;b<c.length;b+=1)if(void 0===a[c[b]])throw'Parameter "'+c[b]+'" is undefined. Please check your request.';return!0},d.prototype.apply_databean_defaults=function(a){var b,c,d=["datasource","output_type","lang","pivot","domain_codes","decimal_places","List1Codes","List2Codes","List3Codes","List4Codes","List5Codes","List6Codes","List7Codes","List1AltCodes","List2AltCodes","List3AltCodes","List4AltCodes","List5AltCodes","List6AltCodes","List7AltCodes","null_values","group_by","order_by","operator","page_size","limit","page_number","show_codes","show_flags","show_unit"],e={output_type:"objects",lang:"en",pivot:"false",decimal_places:"2",List1AltCodes:"",List2AltCodes:"",List3AltCodes:"",List4AltCodes:"",List5AltCodes:"",List6AltCodes:"",List7AltCodes:"",null_values:"false",group_by:"",order_by:"",operator:"",page_size:"100",limit:"-1",page_number:"1",show_codes:"1",show_flags:"1",show_unit:"1"};for(b=0;b<Object.keys(e).length;b+=1)"[]"===e[Object.keys(e)[b]]&&(e[Object.keys(e)[b]]=[]);for(b=0;b<d.length;b+=1){c=d[b];try{a[c]=void 0!==a[c]?a[c]:e[c]}catch(f){}}return a},d.prototype.data_get=function(b){var d=a.extend(!0,{},this.CONFIG,b||{});if(d=this.apply_data_get_defaults(d),this.is_valid_data_get(d)){for(var e=this.CONFIG.base_url+d.lang+"/data/"+d.domain+"/",f=["base_url","lang","domain"],g=!1,h=!0,i=this,j=a.extend(!0,{},b,{datasource:d.datasource,output_type:d.output_type,pivot:d.pivot,domain_codes:d.domain_codes,decimal_places:d.decimal_places,null_values:d.null_values,group_by:d.group_by,order_by:d.order_by,operator:d.operator,page_size:d.page_size,limit:d.limit,page_number:d.page_number,show_codes:d.show_codes,show_flags:d.show_flags,show_unit:d.show_unit}),k=0;k<f.length;k++)delete j[f[k]];g===!0&&a.each(j,function(a,b){Array.isArray(b)&&(j[a]=b.join(","))});var l=JSON.stringify(a.extend({url:e},j)),m=this.store(l);return void 0===m?c(a.ajax({url:e,traditional:h,data:j,type:"GET"})).then(function(a){try{i.store(l,a)}catch(b){}return a}):c.when(m)}throw 400},d.prototype.is_valid_data_get=function(a){var b,c=["datasource","output_type","lang","pivot","domain_codes","decimal_places","null_values","group_by","order_by","operator","page_size","limit","page_number","show_codes","show_flags","show_unit"];for(b=0;b<c.length;b+=1)if(void 0===a[c[b]])throw'Parameter "'+c[b]+'" is undefined. Please check your request.';return!0},d.prototype.apply_data_get_defaults=function(a){var b,c,d=["datasource","output_type","lang","pivot","domain_codes","decimal_places","null_values","group_by","order_by","operator","page_size","limit","page_number","show_codes","show_flags","show_unit"],e={output_type:"objects",lang:"en",pivot:"false",decimal_places:"2",null_values:"false",group_by:"",order_by:"",operator:"",page_size:"100",limit:"-1",page_number:"1",show_codes:"1",show_flags:"1",show_unit:"1"};for(b=0;b<Object.keys(e).length;b+=1)"[]"===e[Object.keys(e)[b]]&&(e[Object.keys(e)[b]]=[]);for(b=0;b<d.length;b+=1){c=d[b];try{a[c]=void 0!==a[c]?a[c]:e[c]}catch(f){}}return a},d.prototype.reportheaders=function(b){var d=a.extend(!0,{},this.CONFIG,b||{});if(d=this.apply_reportheaders_defaults(d),this.is_valid_reportheaders(d)){for(var e=this.CONFIG.base_url+d.lang+"/report/headers/",f=["base_url","lang"],g=!1,h=!0,i=this,j=a.extend(!0,{},b,{datasource:d.datasource,output_type:d.output_type,domain_code:d.domain_code,report_code:d.report_code,List1Codes:d.List1Codes,List2Codes:d.List2Codes,List3Codes:d.List3Codes,List4Codes:d.List4Codes,List5Codes:d.List5Codes,List6Codes:d.List6Codes,List7Codes:d.List7Codes,List1AltCodes:d.List1AltCodes,List2AltCodes:d.List2AltCodes,List3AltCodes:d.List3AltCodes,List4AltCodes:d.List4AltCodes,List5AltCodes:d.List5AltCodes,List6AltCodes:d.List6AltCodes,List7AltCodes:d.List7AltCodes}),k=0;k<f.length;k++)delete j[f[k]];g===!0&&a.each(j,function(a,b){Array.isArray(b)&&(j[a]=b.join(","))});var l=JSON.stringify(a.extend({url:e},j)),m=this.store(l);return void 0===m?c(a.ajax({url:e,traditional:h,data:j,type:"POST"})).then(function(a){try{i.store(l,a)}catch(b){}return a}):c.when(m)}throw 400},d.prototype.is_valid_reportheaders=function(a){var b,c=["datasource","output_type","domain_code","report_code","List1Codes","List2Codes","List3Codes","List4Codes","List5Codes","List6Codes","List7Codes","List1AltCodes","List2AltCodes","List3AltCodes","List4AltCodes","List5AltCodes","List6AltCodes","List7AltCodes"];for(b=0;b<c.length;b+=1)if(void 0===a[c[b]])throw'Parameter "'+c[b]+'" is undefined. Please check your request.';return!0},d.prototype.apply_reportheaders_defaults=function(a){var b,c,d=["datasource","output_type","domain_code","report_code","List1Codes","List2Codes","List3Codes","List4Codes","List5Codes","List6Codes","List7Codes","List1AltCodes","List2AltCodes","List3AltCodes","List4AltCodes","List5AltCodes","List6AltCodes","List7AltCodes"],e={output_type:"objects"};for(b=0;b<Object.keys(e).length;b+=1)"[]"===e[Object.keys(e)[b]]&&(e[Object.keys(e)[b]]=[]);for(b=0;b<d.length;b+=1){c=d[b];try{a[c]=void 0!==a[c]?a[c]:e[c]}catch(f){}}return a},d.prototype.reportdata=function(b){var d=a.extend(!0,{},this.CONFIG,b||{});if(d=this.apply_reportdata_defaults(d),this.is_valid_reportdata(d)){for(var e=this.CONFIG.base_url+d.lang+"/report/data/",f=["base_url","lang"],g=!1,h=!0,i=this,j=a.extend(!0,{},b,{datasource:d.datasource,output_type:d.output_type,domain_code:d.domain_code,report_code:d.report_code,List1Codes:d.List1Codes,List2Codes:d.List2Codes,List3Codes:d.List3Codes,List4Codes:d.List4Codes,List5Codes:d.List5Codes,List6Codes:d.List6Codes,List7Codes:d.List7Codes,List1AltCodes:d.List1AltCodes,List2AltCodes:d.List2AltCodes,List3AltCodes:d.List3AltCodes,List4AltCodes:d.List4AltCodes,List5AltCodes:d.List5AltCodes,List6AltCodes:d.List6AltCodes,List7AltCodes:d.List7AltCodes}),k=0;k<f.length;k++)delete j[f[k]];g===!0&&a.each(j,function(a,b){Array.isArray(b)&&(j[a]=b.join(","))});var l=JSON.stringify(a.extend({url:e},j)),m=this.store(l);return void 0===m?c(a.ajax({url:e,traditional:h,data:j,type:"POST"})).then(function(a){try{i.store(l,a)}catch(b){}return a}):c.when(m)}throw 400},d.prototype.is_valid_reportdata=function(a){var b,c=["datasource","output_type","lang","domain_code","report_code","List1Codes","List2Codes","List3Codes","List4Codes","List5Codes","List6Codes","List7Codes","List1AltCodes","List2AltCodes","List3AltCodes","List4AltCodes","List5AltCodes","List6AltCodes","List7AltCodes"];for(b=0;b<c.length;b+=1)if(void 0===a[c[b]])throw'Parameter "'+c[b]+'" is undefined. Please check your request.';return!0},d.prototype.apply_reportdata_defaults=function(a){var b,c,d=["datasource","output_type","lang","domain_code","report_code","List1Codes","List2Codes","List3Codes","List4Codes","List5Codes","List6Codes","List7Codes","List1AltCodes","List2AltCodes","List3AltCodes","List4AltCodes","List5AltCodes","List6AltCodes","List7AltCodes"],e={output_type:"objects",lang:"en"};for(b=0;b<Object.keys(e).length;b+=1)"[]"===e[Object.keys(e)[b]]&&(e[Object.keys(e)[b]]=[]);for(b=0;b<d.length;b+=1){c=d[b];try{a[c]=void 0!==a[c]?a[c]:e[c]}catch(f){}}return a},d.prototype.datasize=function(b){var d=a.extend(!0,{},this.CONFIG,b||{});if(d=this.apply_datasize_defaults(d),this.is_valid_datasize(d)){for(var e=this.CONFIG.base_url+d.lang+"/datasize/",f=["base_url","lang"],g=!1,h=!0,i=this,j=a.extend(!0,{},b,{datasource:d.datasource,output_type:d.output_type,domain_codes:d.domain_codes,List1Codes:d.List1Codes,List2Codes:d.List2Codes,List3Codes:d.List3Codes,List4Codes:d.List4Codes,List5Codes:d.List5Codes,List6Codes:d.List6Codes,List7Codes:d.List7Codes,no_records:d.no_records,null_values:d.null_values}),k=0;k<f.length;k++)delete j[f[k]];g===!0&&a.each(j,function(a,b){Array.isArray(b)&&(j[a]=b.join(","))});var l=JSON.stringify(a.extend({url:e},j)),m=this.store(l);return void 0===m?c(a.ajax({url:e,traditional:h,data:j,type:"POST"})).then(function(a){try{i.store(l,a)}catch(b){}return a}):c.when(m)}throw 400},d.prototype.is_valid_datasize=function(a){var b,c=["datasource","output_type","lang","domain_codes","List1Codes","List2Codes","List3Codes","List4Codes","List5Codes","List6Codes","List7Codes","no_records","null_values"];for(b=0;b<c.length;b+=1)if(void 0===a[c[b]])throw'Parameter "'+c[b]+'" is undefined. Please check your request.';return!0},d.prototype.apply_datasize_defaults=function(a){var b,c,d=["datasource","output_type","lang","domain_codes","List1Codes","List2Codes","List3Codes","List4Codes","List5Codes","List6Codes","List7Codes","no_records","null_values"],e={output_type:"objects",lang:"en",no_records:"1",null_values:"false"};for(b=0;b<Object.keys(e).length;b+=1)"[]"===e[Object.keys(e)[b]]&&(e[Object.keys(e)[b]]=[]);for(b=0;b<d.length;b+=1){c=d[b];try{a[c]=void 0!==a[c]?a[c]:e[c]}catch(f){}}return a},d.prototype.groupsanddomains=function(b){var d=a.extend(!0,{},this.CONFIG,b||{});if(d=this.apply_groupsanddomains_defaults(d),this.is_valid_groupsanddomains(d)){for(var e=this.CONFIG.base_url+d.lang+"/groupsanddomains",f=["base_url","lang"],g=!1,h=!0,i=this,j=a.extend(!0,{},b,{datasource:d.datasource,section:d.section}),k=0;k<f.length;k++)delete j[f[k]];g===!0&&a.each(j,function(a,b){Array.isArray(b)&&(j[a]=b.join(","))});var l=JSON.stringify(a.extend({url:e},j)),m=this.store(l);return void 0===m?c(a.ajax({url:e,traditional:h,data:j,type:"GET"})).then(function(a){try{i.store(l,a)}catch(b){}return a}):c.when(m)}throw 400},d.prototype.is_valid_groupsanddomains=function(a){var b,c=["lang"];for(b=0;b<c.length;b+=1)if(void 0===a[c[b]])throw'Parameter "'+c[b]+'" is undefined. Please check your request.';return!0},d.prototype.apply_groupsanddomains_defaults=function(a){var b,c,d=["datasource","lang","section"],e={lang:"en"};for(b=0;b<Object.keys(e).length;b+=1)"[]"===e[Object.keys(e)[b]]&&(e[Object.keys(e)[b]]=[]);for(b=0;b<d.length;b+=1){c=d[b];try{a[c]=void 0!==a[c]?a[c]:e[c]}catch(f){}}return a},d.prototype.dimensions=function(b){var d=a.extend(!0,{},this.CONFIG,b||{});if(d=this.apply_dimensions_defaults(d),this.is_valid_dimensions(d)){for(var e=this.CONFIG.base_url+d.lang+"/dimensions/"+d.domain_code+"/",f=["base_url","lang","domain_code"],g=!1,h=!0,i=this,j=a.extend(!0,{},b,{datasource:d.datasource,report_code:d.report_code,full:d.full}),k=0;k<f.length;k++)delete j[f[k]];g===!0&&a.each(j,function(a,b){Array.isArray(b)&&(j[a]=b.join(","))});var l=JSON.stringify(a.extend({url:e},j)),m=this.store(l);return void 0===m?c(a.ajax({url:e,traditional:h,data:j,type:"GET"})).then(function(a){try{i.store(l,a)}catch(b){}return a}):c.when(m)}throw 400},d.prototype.is_valid_dimensions=function(a){var b,c=["lang","domain_code"];for(b=0;b<c.length;b+=1)if(void 0===a[c[b]])throw'Parameter "'+c[b]+'" is undefined. Please check your request.';return!0},d.prototype.apply_dimensions_defaults=function(a){var b,c,d=["datasource","report_code","lang","domain_code","full"],e={lang:"en",full:"false"};for(b=0;b<Object.keys(e).length;b+=1)"[]"===e[Object.keys(e)[b]]&&(e[Object.keys(e)[b]]=[]);for(b=0;b<d.length;b+=1){c=d[b];try{a[c]=void 0!==a[c]?a[c]:e[c]}catch(f){}}return a},d.prototype.codes=function(b){var d=a.extend(!0,{},this.CONFIG,b||{});if(d=this.apply_codes_defaults(d),this.is_valid_codes(d)){for(var e=this.CONFIG.base_url+d.lang+"/codes/"+d.id+"/"+d.domain_code+"/",f=["base_url","lang","id","domain_code"],g=!1,h=!0,i=this,j=a.extend(!0,{},b,{datasource:d.datasource,report_code:d.report_code,whitelist:d.whitelist,blacklist:d.blacklist,show_lists:d.show_lists}),k=0;k<f.length;k++)delete j[f[k]];g===!0&&a.each(j,function(a,b){Array.isArray(b)&&(j[a]=b.join(","))});var l=JSON.stringify(a.extend({url:e},j)),m=this.store(l);return void 0===m?c(a.ajax({url:e,traditional:h,data:j,type:"GET"})).then(function(a){try{i.store(l,a)}catch(b){}return a}):c.when(m)}throw 400},d.prototype.is_valid_codes=function(a){var b,c=["lang","id","domain_code"];for(b=0;b<c.length;b+=1)if(void 0===a[c[b]])throw'Parameter "'+c[b]+'" is undefined. Please check your request.';return!0},d.prototype.apply_codes_defaults=function(a){var b,c,d=["datasource","domain_code","report_code","lang","id","whitelist","blacklist","show_lists"],e={lang:"en",whitelist:"[]",blacklist:"[]",show_lists:"true"};for(b=0;b<Object.keys(e).length;b+=1)"[]"===e[Object.keys(e)[b]]&&(e[Object.keys(e)[b]]=[]);for(b=0;b<d.length;b+=1){c=d[b];try{a[c]=void 0!==a[c]?a[c]:e[c]}catch(f){}}return a},d.prototype.groups=function(b){var d=a.extend(!0,{},this.CONFIG,b||{});if(d=this.apply_groups_defaults(d),this.is_valid_groups(d)){for(var e=this.CONFIG.base_url+d.lang+"/groups/",f=["base_url","lang"],g=!1,h=!0,i=this,j=a.extend(!0,{},b,{datasource:d.datasource,whitelist:d.whitelist,blacklist:d.blacklist}),k=0;k<f.length;k++)delete j[f[k]];g===!0&&a.each(j,function(a,b){Array.isArray(b)&&(j[a]=b.join(","))});var l=JSON.stringify(a.extend({url:e},j)),m=this.store(l);return void 0===m?c(a.ajax({url:e,traditional:h,data:j,type:"GET"})).then(function(a){try{i.store(l,a)}catch(b){}return a}):c.when(m)}throw 400},d.prototype.is_valid_groups=function(a){var b,c=["lang"];for(b=0;b<c.length;b+=1)if(void 0===a[c[b]])throw'Parameter "'+c[b]+'" is undefined. Please check your request.';return!0},d.prototype.apply_groups_defaults=function(a){var b,c,d=["datasource","whitelist","blacklist","lang"],e={whitelist:"[]",blacklist:"[]",lang:"en"};for(b=0;b<Object.keys(e).length;b+=1)"[]"===e[Object.keys(e)[b]]&&(e[Object.keys(e)[b]]=[]);for(b=0;b<d.length;b+=1){c=d[b];try{a[c]=void 0!==a[c]?a[c]:e[c]}catch(f){}}return a},d.prototype.domains=function(b){var d=a.extend(!0,{},this.CONFIG,b||{});if(d=this.apply_domains_defaults(d),this.is_valid_domains(d)){for(var e=this.CONFIG.base_url+d.lang+"/domains/"+d.group_code+"/",f=["base_url","lang","group_code"],g=!1,h=!0,i=this,j=a.extend(!0,{},b,{datasource:d.datasource,whitelist:d.whitelist,blacklist:d.blacklist}),k=0;k<f.length;k++)delete j[f[k]];g===!0&&a.each(j,function(a,b){Array.isArray(b)&&(j[a]=b.join(","))});var l=JSON.stringify(a.extend({url:e},j)),m=this.store(l);return void 0===m?c(a.ajax({url:e,traditional:h,data:j,type:"GET"})).then(function(a){try{i.store(l,a)}catch(b){}return a}):c.when(m)}throw 400},d.prototype.is_valid_domains=function(a){var b,c=["lang","group_code"];for(b=0;b<c.length;b+=1)if(void 0===a[c[b]])throw'Parameter "'+c[b]+'" is undefined. Please check your request.';return!0},d.prototype.apply_domains_defaults=function(a){var b,c,d=["datasource","lang","group_code","whitelist","blacklist"],e={lang:"en",whitelist:"[]",blacklist:"[]"};for(b=0;b<Object.keys(e).length;b+=1)"[]"===e[Object.keys(e)[b]]&&(e[Object.keys(e)[b]]=[]);for(b=0;b<d.length;b+=1){c=d[b];try{a[c]=void 0!==a[c]?a[c]:e[c]}catch(f){}}return a},d.prototype.bulkdownloads=function(b){var d=a.extend(!0,{},this.CONFIG,b||{});if(d=this.apply_bulkdownloads_defaults(d),this.is_valid_bulkdownloads(d)){for(var e=this.CONFIG.base_url+d.lang+"/bulkdownloads/"+d.domain_code+"/",f=["base_url","lang","domain_code"],g=!1,h=!0,i=this,j=a.extend(!0,{},b,{datasource:d.datasource}),k=0;k<f.length;k++)delete j[f[k]];g===!0&&a.each(j,function(a,b){Array.isArray(b)&&(j[a]=b.join(","))});var l=JSON.stringify(a.extend({url:e},j)),m=this.store(l);return void 0===m?c(a.ajax({url:e,traditional:h,data:j,type:"GET"})).then(function(a){try{i.store(l,a)}catch(b){}return a}):c.when(m)}throw 400},d.prototype.is_valid_bulkdownloads=function(a){var b,c=["lang","domain_code"];for(b=0;b<c.length;b+=1)if(void 0===a[c[b]])throw'Parameter "'+c[b]+'" is undefined. Please check your request.';return!0},d.prototype.apply_bulkdownloads_defaults=function(a){var b,c,d=["datasource","lang","domain_code"],e={lang:"en"};for(b=0;b<Object.keys(e).length;b+=1)"[]"===e[Object.keys(e)[b]]&&(e[Object.keys(e)[b]]=[]);for(b=0;b<d.length;b+=1){c=d[b];try{a[c]=void 0!==a[c]?a[c]:e[c]}catch(f){}}return a},d.prototype.documents=function(b){var d=a.extend(!0,{},this.CONFIG,b||{});if(d=this.apply_documents_defaults(d),this.is_valid_documents(d)){for(var e=this.CONFIG.base_url+d.lang+"/documents/"+d.domain_code+"/",f=["base_url","lang","domain_code"],g=!1,h=!0,i=this,j=a.extend(!0,{},b,{datasource:d.datasource}),k=0;k<f.length;k++)delete j[f[k]];g===!0&&a.each(j,function(a,b){Array.isArray(b)&&(j[a]=b.join(","))});var l=JSON.stringify(a.extend({url:e},j)),m=this.store(l);return void 0===m?c(a.ajax({url:e,traditional:h,data:j,type:"GET"})).then(function(a){try{i.store(l,a)}catch(b){}return a}):c.when(m)}throw 400},d.prototype.is_valid_documents=function(a){var b,c=["lang","domain_code"];for(b=0;b<c.length;b+=1)if(void 0===a[c[b]])throw'Parameter "'+c[b]+'" is undefined. Please check your request.';return!0},d.prototype.apply_documents_defaults=function(a){var b,c,d=["datasource","lang","domain_code"],e={lang:"en"};for(b=0;b<Object.keys(e).length;b+=1)"[]"===e[Object.keys(e)[b]]&&(e[Object.keys(e)[b]]=[]);for(b=0;b<d.length;b+=1){c=d[b];try{a[c]=void 0!==a[c]?a[c]:e[c]}catch(f){}}return a},d.prototype.suggestions=function(b){var d=a.extend(!0,{},this.CONFIG,b||{});if(d=this.apply_suggestions_defaults(d),this.is_valid_suggestions(d)){for(var e=this.CONFIG.base_url+d.lang+"/suggestions",f=["base_url","lang"],g=!1,h=!0,i=this,j=a.extend(!0,{},b,{datasource:d.datasource,q:d.q}),k=0;k<f.length;k++)delete j[f[k]];g===!0&&a.each(j,function(a,b){Array.isArray(b)&&(j[a]=b.join(","))});var l=JSON.stringify(a.extend({url:e},j)),m=this.store(l);return void 0===m?c(a.ajax({url:e,traditional:h,data:j,type:"GET"})).then(function(a){try{i.store(l,a)}catch(b){}return a}):c.when(m)}throw 400},d.prototype.is_valid_suggestions=function(a){var b,c=["lang","q"];for(b=0;b<c.length;b+=1)if(void 0===a[c[b]])throw'Parameter "'+c[b]+'" is undefined. Please check your request.';return!0},d.prototype.apply_suggestions_defaults=function(a){var b,c,d=["datasource","lang","q"],e={lang:"en"};for(b=0;b<Object.keys(e).length;b+=1)"[]"===e[Object.keys(e)[b]]&&(e[Object.keys(e)[b]]=[]);for(b=0;b<d.length;b+=1){c=d[b];try{a[c]=void 0!==a[c]?a[c]:e[c]}catch(f){}}return a},d.prototype.search=function(b){var d=a.extend(!0,{},this.CONFIG,b||{});if(d=this.apply_search_defaults(d),this.is_valid_search(d)){for(var e=this.CONFIG.base_url+d.lang+"/search",f=["base_url","lang"],g=!1,h=!0,i=this,j=a.extend(!0,{},b,{datasource:d.datasource,q:d.q}),k=0;k<f.length;k++)delete j[f[k]];g===!0&&a.each(j,function(a,b){Array.isArray(b)&&(j[a]=b.join(","))});var l=JSON.stringify(a.extend({url:e},j)),m=this.store(l);return void 0===m?c(a.ajax({url:e,traditional:h,data:j,type:"GET"})).then(function(a){try{i.store(l,a)}catch(b){}return a}):c.when(m)}throw 400},d.prototype.is_valid_search=function(a){var b,c=["lang","q"];for(b=0;b<c.length;b+=1)if(void 0===a[c[b]])throw'Parameter "'+c[b]+'" is undefined. Please check your request.';return!0},d.prototype.apply_search_defaults=function(a){var b,c,d=["datasource","lang","q"],e={lang:"en"};for(b=0;b<Object.keys(e).length;b+=1)"[]"===e[Object.keys(e)[b]]&&(e[Object.keys(e)[b]]=[]);for(b=0;b<d.length;b+=1){c=d[b];try{a[c]=void 0!==a[c]?a[c]:e[c]}catch(f){}}return a},d.prototype.metadata=function(b){var d=a.extend(!0,{},this.CONFIG,b||{});if(d=this.apply_metadata_defaults(d),this.is_valid_metadata(d)){for(var e=this.CONFIG.base_url+d.lang+"/metadata/"+d.domain_code,f=["base_url","lang","domain_code"],g=!1,h=!0,i=this,j=a.extend(!0,{},b,{datasource:d.datasource}),k=0;k<f.length;k++)delete j[f[k]];g===!0&&a.each(j,function(a,b){Array.isArray(b)&&(j[a]=b.join(","))});var l=JSON.stringify(a.extend({url:e},j)),m=this.store(l);return void 0===m?c(a.ajax({url:e,traditional:h,data:j,type:"GET"})).then(function(a){try{i.store(l,a)}catch(b){}return a}):c.when(m)}throw 400},d.prototype.is_valid_metadata=function(a){var b,c=["lang","domain_code"];for(b=0;b<c.length;b+=1)if(void 0===a[c[b]])throw'Parameter "'+c[b]+'" is undefined. Please check your request.';return!0},d.prototype.apply_metadata_defaults=function(a){var b,c,d=["datasource","lang"],e={lang:"en"};for(b=0;b<Object.keys(e).length;b+=1)"[]"===e[Object.keys(e)[b]]&&(e[Object.keys(e)[b]]=[]);for(b=0;b<d.length;b+=1){c=d[b];try{a[c]=void 0!==a[c]?a[c]:e[c]}catch(f){}}return a},d.prototype.definitions_types=function(b){var d=a.extend(!0,{},this.CONFIG,b||{});if(d=this.apply_definitions_types_defaults(d),this.is_valid_definitions_types(d)){for(var e=this.CONFIG.base_url+d.lang+"/definitions/types",f=["base_url","lang"],g=!1,h=!0,i=this,j=a.extend(!0,{},b,{datasource:d.datasource}),k=0;k<f.length;k++)delete j[f[k]];g===!0&&a.each(j,function(a,b){Array.isArray(b)&&(j[a]=b.join(","))});var l=JSON.stringify(a.extend({url:e},j)),m=this.store(l);return void 0===m?c(a.ajax({url:e,traditional:h,data:j,type:"GET"})).then(function(a){try{i.store(l,a)}catch(b){}return a}):c.when(m)}throw 400},d.prototype.is_valid_definitions_types=function(a){var b,c=["lang"];for(b=0;b<c.length;b+=1)if(void 0===a[c[b]])throw'Parameter "'+c[b]+'" is undefined. Please check your request.';return!0},d.prototype.apply_definitions_types_defaults=function(a){var b,c,d=["datasource","lang"],e={lang:"en"};for(b=0;b<Object.keys(e).length;b+=1)"[]"===e[Object.keys(e)[b]]&&(e[Object.keys(e)[b]]=[]);for(b=0;b<d.length;b+=1){c=d[b];try{a[c]=void 0!==a[c]?a[c]:e[c]}catch(f){}}return a},d.prototype.definitions_by_type=function(b){var d=a.extend(!0,{},this.CONFIG,b||{});if(d=this.apply_definitions_by_type_defaults(d),this.is_valid_definitions_by_type(d)){for(var e=this.CONFIG.base_url+d.lang+"/definitions/types/"+d.type,f=["base_url","lang","type"],g=!1,h=!0,i=this,j=a.extend(!0,{},b,{datasource:d.datasource}),k=0;k<f.length;k++)delete j[f[k]];g===!0&&a.each(j,function(a,b){Array.isArray(b)&&(j[a]=b.join(","))});var l=JSON.stringify(a.extend({url:e},j)),m=this.store(l);return void 0===m?c(a.ajax({url:e,traditional:h,data:j,type:"GET"})).then(function(a){try{i.store(l,a)}catch(b){}return a}):c.when(m)}throw 400},d.prototype.is_valid_definitions_by_type=function(a){var b,c=["lang","type"];for(b=0;b<c.length;b+=1)if(void 0===a[c[b]])throw'Parameter "'+c[b]+'" is undefined. Please check your request.';return!0},d.prototype.apply_definitions_by_type_defaults=function(a){var b,c,d=["datasource","lang","type"],e={lang:"en"};for(b=0;b<Object.keys(e).length;b+=1)"[]"===e[Object.keys(e)[b]]&&(e[Object.keys(e)[b]]=[]);for(b=0;b<d.length;b+=1){c=d[b];try{a[c]=void 0!==a[c]?a[c]:e[c]}catch(f){}}return a},d.prototype.definitions_domain=function(b){var d=a.extend(!0,{},this.CONFIG,b||{});if(d=this.apply_definitions_domain_defaults(d),this.is_valid_definitions_domain(d)){for(var e=this.CONFIG.base_url+d.lang+"/definitions/domain/"+d.domain_code,f=["base_url","lang","domain_code"],g=!1,h=!0,i=this,j=a.extend(!0,{},b,{datasource:d.datasource}),k=0;k<f.length;k++)delete j[f[k]];g===!0&&a.each(j,function(a,b){Array.isArray(b)&&(j[a]=b.join(","))});var l=JSON.stringify(a.extend({url:e},j)),m=this.store(l);return void 0===m?c(a.ajax({url:e,traditional:h,data:j,type:"GET"})).then(function(a){try{i.store(l,a)}catch(b){}return a}):c.when(m)}throw 400},d.prototype.is_valid_definitions_domain=function(a){var b,c=["lang","domain_code"];for(b=0;b<c.length;b+=1)if(void 0===a[c[b]])throw'Parameter "'+c[b]+'" is undefined. Please check your request.';return!0},d.prototype.apply_definitions_domain_defaults=function(a){var b,c,d=["datasource","lang","domain_code"],e={lang:"en"};for(b=0;b<Object.keys(e).length;b+=1)"[]"===e[Object.keys(e)[b]]&&(e[Object.keys(e)[b]]=[]);for(b=0;b<d.length;b+=1){c=d[b];try{a[c]=void 0!==a[c]?a[c]:e[c]}catch(f){}}return a},d.prototype.definitions_domain_by_type=function(b){var d=a.extend(!0,{},this.CONFIG,b||{});if(d=this.apply_definitions_domain_by_type_defaults(d),this.is_valid_definitions_domain_by_type(d)){for(var e=this.CONFIG.base_url+d.lang+"/definitions/domain/"+d.domain_code+"/"+d.type,f=["base_url","lang","domain_code","type"],g=!1,h=!0,i=this,j=a.extend(!0,{},b,{datasource:d.datasource,output_type:d.output_type}),k=0;k<f.length;k++)delete j[f[k]];g===!0&&a.each(j,function(a,b){Array.isArray(b)&&(j[a]=b.join(","))});var l=JSON.stringify(a.extend({url:e},j)),m=this.store(l);return void 0===m?c(a.ajax({url:e,traditional:h,data:j,type:"GET"})).then(function(a){try{i.store(l,a)}catch(b){}return a}):c.when(m)}throw 400},d.prototype.is_valid_definitions_domain_by_type=function(a){var b,c=["lang","domain_code","type"];for(b=0;b<c.length;b+=1)if(void 0===a[c[b]])throw'Parameter "'+c[b]+'" is undefined. Please check your request.';return!0},d.prototype.apply_definitions_domain_by_type_defaults=function(a){var b,c,d=["datasource","output_type","lang","domain_code","type"],e={output_type:"objects",lang:"en"};for(b=0;b<Object.keys(e).length;b+=1)"[]"===e[Object.keys(e)[b]]&&(e[Object.keys(e)[b]]=[]);for(b=0;b<d.length;b+=1){c=d[b];try{a[c]=void 0!==a[c]?a[c]:e[c]}catch(f){}}return a},d.prototype.data=function(b){var d=a.extend(!0,{},this.CONFIG,b||{});if(d=this.apply_data_defaults(d),this.is_valid_data(d)){for(var e=this.CONFIG.base_url+d.lang+"/data/"+d.domain_code,f=["base_url","lang","domain_code"],g=!0,h=!0,i=this,j=a.extend(!0,{},b,{datasource:d.datasource,output_type:d.output_type}),k=0;k<f.length;k++)delete j[f[k]];g===!0&&a.each(j,function(a,b){Array.isArray(b)&&(j[a]=b.join(","))});var l=JSON.stringify(a.extend({url:e},j)),m=this.store(l);return void 0===m?c(a.ajax({url:e,traditional:h,data:j,type:"GET"})).then(function(a){try{i.store(l,a)}catch(b){}return a}):c.when(m)}throw 400},d.prototype.is_valid_data=function(a){var b,c=["lang","domain_code"];for(b=0;b<c.length;b+=1)if(void 0===a[c[b]])throw'Parameter "'+c[b]+'" is undefined. Please check your request.';return!0},d.prototype.apply_data_defaults=function(a){var b,c,d=["datasource","output_type","lang"],e={output_type:"objects",lang:"en"};for(b=0;b<Object.keys(e).length;b+=1)"[]"===e[Object.keys(e)[b]]&&(e[Object.keys(e)[b]]=[]);for(b=0;b<d.length;b+=1){c=d[b];try{a[c]=void 0!==a[c]?a[c]:e[c]}catch(f){}}return a},d.prototype.store=function(a,c){if(!this.CONFIG.hasOwnProperty("mode")||"dev"!==this.CONFIG.mode){var d=3e5;return void 0!==c?(this.CONFIG.log&&b.info("Stored",a),amplify.store(a,c,d)):(this.CONFIG.log&&b.info("Get Stored",a),amplify.store(a))}},new d});