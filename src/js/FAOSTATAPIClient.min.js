define(["jquery","loglevel","q","amplify"],function(a,b,c){"use strict";function d(){this.CONFIG={base_url:"http://fenixservices.fao.org/faostat/api/v1/",mode:"@@mode",lang:"en",log:!1}}return d.prototype.config=function(b){this.CONFIG=a.extend(!0,{},this.CONFIG,b||{})},d.prototype.rankings=function(d){var e=a.extend(!0,{},this.CONFIG,d||{});if(e=this.apply_rankings_defaults(e),this.is_valid_rankings(e)){for(var f=this.CONFIG.base_url+e.lang+"/rankings/",g=["base_url","lang"],h=!1,i=!0,j=this,k=a.extend(!0,{},d,{output_type:e.output_type,domain_codes:e.domain_codes,List1Codes:e.List1Codes,List2Codes:e.List2Codes,List3Codes:e.List3Codes,List4Codes:e.List4Codes,List5Codes:e.List5Codes,List6Codes:e.List6Codes,List7Codes:e.List7Codes,filter_list:e.filter_list,rank_type:e.rank_type,limit:e.limit}),l=0;l<g.length;l++)delete k[g[l]];h===!0&&a.each(k,function(a,b){Array.isArray(b)&&(k[a]=b.join(","))}),this.CONFIG.log&&b.info("API.rankings; request",k);var m=JSON.stringify(a.extend({url:f},k)),n=this.store(m);return void 0===n?c(a.ajax({url:f,traditional:i,data:k,type:"POST"})).then(function(a){try{j.store(m,a)}catch(b){}return a}):c.when(n)}throw 400},d.prototype.is_valid_rankings=function(a){var c,d=["output_type","lang","domain_codes","List1Codes","List2Codes","List3Codes","List4Codes","List5Codes","List6Codes","List7Codes","filter_list","rank_type","limit"];for(c=0;c<d.length;c+=1)if(void 0===a[d[c]])throw b.error('Parameter "'+d[c]+'" is undefined. Please check your request.'),'Parameter "'+d[c]+'" is undefined. Please check your request.';return this.CONFIG.log&&b.info("API.prototype.is_valid_rankings",!0),!0},d.prototype.apply_rankings_defaults=function(a){var c,d,e=["output_type","lang","domain_codes","List1Codes","List2Codes","List3Codes","List4Codes","List5Codes","List6Codes","List7Codes","filter_list","rank_type","limit"],f={output_type:"objects",lang:"en",rank_type:"ASC",limit:"5"};for(c=0;c<Object.keys(f).length;c+=1)"[]"===f[Object.keys(f)[c]]&&(f[Object.keys(f)[c]]=[]);for(c=0;c<e.length;c+=1){d=e[c];try{a[d]=void 0!==a[d]?a[d]:f[d]}catch(g){}}return this.CONFIG.log&&b.info("API.prototype.apply_rankings",f,e,a),a},d.prototype.reportheaders=function(d){var e=a.extend(!0,{},this.CONFIG,d||{});if(e=this.apply_reportheaders_defaults(e),this.is_valid_reportheaders(e)){for(var f=this.CONFIG.base_url+e.lang+"/report/headers/",g=["base_url","lang"],h=!1,i=!0,j=this,k=a.extend(!0,{},d,{output_type:e.output_type,domain_code:e.domain_code,report_code:e.report_code,List1Codes:e.List1Codes,List2Codes:e.List2Codes,List3Codes:e.List3Codes,List4Codes:e.List4Codes,List5Codes:e.List5Codes,List6Codes:e.List6Codes,List7Codes:e.List7Codes,List1AltCodes:e.List1AltCodes,List2AltCodes:e.List2AltCodes,List3AltCodes:e.List3AltCodes,List4AltCodes:e.List4AltCodes,List5AltCodes:e.List5AltCodes,List6AltCodes:e.List6AltCodes,List7AltCodes:e.List7AltCodes}),l=0;l<g.length;l++)delete k[g[l]];h===!0&&a.each(k,function(a,b){Array.isArray(b)&&(k[a]=b.join(","))}),this.CONFIG.log&&b.info("API.reportheaders; request",k);var m=JSON.stringify(a.extend({url:f},k)),n=this.store(m);return void 0===n?c(a.ajax({url:f,traditional:i,data:k,type:"POST"})).then(function(a){try{j.store(m,a)}catch(b){}return a}):c.when(n)}throw 400},d.prototype.is_valid_reportheaders=function(a){var c,d=["output_type","domain_code","report_code","List1Codes","List2Codes","List3Codes","List4Codes","List5Codes","List6Codes","List7Codes","List1AltCodes","List2AltCodes","List3AltCodes","List4AltCodes","List5AltCodes","List6AltCodes","List7AltCodes"];for(c=0;c<d.length;c+=1)if(void 0===a[d[c]])throw b.error('Parameter "'+d[c]+'" is undefined. Please check your request.'),'Parameter "'+d[c]+'" is undefined. Please check your request.';return this.CONFIG.log&&b.info("API.prototype.is_valid_reportheaders",!0),!0},d.prototype.apply_reportheaders_defaults=function(a){var c,d,e=["output_type","domain_code","report_code","List1Codes","List2Codes","List3Codes","List4Codes","List5Codes","List6Codes","List7Codes","List1AltCodes","List2AltCodes","List3AltCodes","List4AltCodes","List5AltCodes","List6AltCodes","List7AltCodes"],f={output_type:"objects"};for(c=0;c<Object.keys(f).length;c+=1)"[]"===f[Object.keys(f)[c]]&&(f[Object.keys(f)[c]]=[]);for(c=0;c<e.length;c+=1){d=e[c];try{a[d]=void 0!==a[d]?a[d]:f[d]}catch(g){}}return this.CONFIG.log&&b.info("API.prototype.apply_reportheaders",f,e,a),a},d.prototype.reportdata=function(d){var e=a.extend(!0,{},this.CONFIG,d||{});if(e=this.apply_reportdata_defaults(e),this.is_valid_reportdata(e)){for(var f=this.CONFIG.base_url+e.lang+"/report/data/",g=["base_url","lang"],h=!1,i=!0,j=this,k=a.extend(!0,{},d,{output_type:e.output_type,domain_code:e.domain_code,report_code:e.report_code,List1Codes:e.List1Codes,List2Codes:e.List2Codes,List3Codes:e.List3Codes,List4Codes:e.List4Codes,List5Codes:e.List5Codes,List6Codes:e.List6Codes,List7Codes:e.List7Codes,List1AltCodes:e.List1AltCodes,List2AltCodes:e.List2AltCodes,List3AltCodes:e.List3AltCodes,List4AltCodes:e.List4AltCodes,List5AltCodes:e.List5AltCodes,List6AltCodes:e.List6AltCodes,List7AltCodes:e.List7AltCodes}),l=0;l<g.length;l++)delete k[g[l]];h===!0&&a.each(k,function(a,b){Array.isArray(b)&&(k[a]=b.join(","))}),this.CONFIG.log&&b.info("API.reportdata; request",k);var m=JSON.stringify(a.extend({url:f},k)),n=this.store(m);return void 0===n?c(a.ajax({url:f,traditional:i,data:k,type:"POST"})).then(function(a){try{j.store(m,a)}catch(b){}return a}):c.when(n)}throw 400},d.prototype.is_valid_reportdata=function(a){var c,d=["output_type","lang","domain_code","report_code","List1Codes","List2Codes","List3Codes","List4Codes","List5Codes","List6Codes","List7Codes","List1AltCodes","List2AltCodes","List3AltCodes","List4AltCodes","List5AltCodes","List6AltCodes","List7AltCodes"];for(c=0;c<d.length;c+=1)if(void 0===a[d[c]])throw b.error('Parameter "'+d[c]+'" is undefined. Please check your request.'),'Parameter "'+d[c]+'" is undefined. Please check your request.';return this.CONFIG.log&&b.info("API.prototype.is_valid_reportdata",!0),!0},d.prototype.apply_reportdata_defaults=function(a){var c,d,e=["output_type","lang","domain_code","report_code","List1Codes","List2Codes","List3Codes","List4Codes","List5Codes","List6Codes","List7Codes","List1AltCodes","List2AltCodes","List3AltCodes","List4AltCodes","List5AltCodes","List6AltCodes","List7AltCodes"],f={output_type:"objects",lang:"en"};for(c=0;c<Object.keys(f).length;c+=1)"[]"===f[Object.keys(f)[c]]&&(f[Object.keys(f)[c]]=[]);for(c=0;c<e.length;c+=1){d=e[c];try{a[d]=void 0!==a[d]?a[d]:f[d]}catch(g){}}return this.CONFIG.log&&b.info("API.prototype.apply_reportdata",f,e,a),a},d.prototype.datasize=function(d){var e=a.extend(!0,{},this.CONFIG,d||{});if(e=this.apply_datasize_defaults(e),this.is_valid_datasize(e)){for(var f=this.CONFIG.base_url+e.lang+"/datasize/",g=["base_url","lang"],h=!1,i=!0,j=this,k=a.extend(!0,{},d,{output_type:e.output_type,domain_codes:e.domain_codes,List1Codes:e.List1Codes,List2Codes:e.List2Codes,List3Codes:e.List3Codes,List4Codes:e.List4Codes,List5Codes:e.List5Codes,List6Codes:e.List6Codes,List7Codes:e.List7Codes,no_records:e.no_records,null_values:e.null_values}),l=0;l<g.length;l++)delete k[g[l]];h===!0&&a.each(k,function(a,b){Array.isArray(b)&&(k[a]=b.join(","))}),this.CONFIG.log&&b.info("API.datasize; request",k);var m=JSON.stringify(a.extend({url:f},k)),n=this.store(m);return void 0===n?c(a.ajax({url:f,traditional:i,data:k,type:"POST"})).then(function(a){try{j.store(m,a)}catch(b){}return a}):c.when(n)}throw 400},d.prototype.is_valid_datasize=function(a){var c,d=["output_type","lang","domain_codes","List1Codes","List2Codes","List3Codes","List4Codes","List5Codes","List6Codes","List7Codes","no_records","null_values"];for(c=0;c<d.length;c+=1)if(void 0===a[d[c]])throw b.error('Parameter "'+d[c]+'" is undefined. Please check your request.'),'Parameter "'+d[c]+'" is undefined. Please check your request.';return this.CONFIG.log&&b.info("API.prototype.is_valid_datasize",!0),!0},d.prototype.apply_datasize_defaults=function(a){var c,d,e=["output_type","lang","domain_codes","List1Codes","List2Codes","List3Codes","List4Codes","List5Codes","List6Codes","List7Codes","no_records","null_values"],f={output_type:"objects",lang:"en",no_records:"1",null_values:"false"};for(c=0;c<Object.keys(f).length;c+=1)"[]"===f[Object.keys(f)[c]]&&(f[Object.keys(f)[c]]=[]);for(c=0;c<e.length;c+=1){d=e[c];try{a[d]=void 0!==a[d]?a[d]:f[d]}catch(g){}}return this.CONFIG.log&&b.info("API.prototype.apply_datasize",f,e,a),a},d.prototype.groupsanddomains=function(d){var e=a.extend(!0,{},this.CONFIG,d||{});if(e=this.apply_groupsanddomains_defaults(e),this.is_valid_groupsanddomains(e)){for(var f=this.CONFIG.base_url+e.lang+"/groupsanddomains",g=["base_url","lang"],h=!1,i=!0,j=this,k=a.extend(!0,{},d,{datasource:e.datasource,section:e.section}),l=0;l<g.length;l++)delete k[g[l]];h===!0&&a.each(k,function(a,b){Array.isArray(b)&&(k[a]=b.join(","))}),this.CONFIG.log&&b.info("API.groupsanddomains; request",k);var m=JSON.stringify(a.extend({url:f},k)),n=this.store(m);return void 0===n?c(a.ajax({url:f,traditional:i,data:k,type:"GET"})).then(function(a){try{j.store(m,a)}catch(b){}return a}):c.when(n)}throw 400},d.prototype.is_valid_groupsanddomains=function(a){var c,d=["lang"];for(c=0;c<d.length;c+=1)if(void 0===a[d[c]])throw b.error('Parameter "'+d[c]+'" is undefined. Please check your request.'),'Parameter "'+d[c]+'" is undefined. Please check your request.';return this.CONFIG.log&&b.info("API.prototype.is_valid_groupsanddomains",!0),!0},d.prototype.apply_groupsanddomains_defaults=function(a){var c,d,e=["datasource","lang","section"],f={lang:"en"};for(c=0;c<Object.keys(f).length;c+=1)"[]"===f[Object.keys(f)[c]]&&(f[Object.keys(f)[c]]=[]);for(c=0;c<e.length;c+=1){d=e[c];try{a[d]=void 0!==a[d]?a[d]:f[d]}catch(g){}}return this.CONFIG.log&&b.info("API.prototype.apply_groupsanddomains",f,e,a),a},d.prototype.dimensions=function(d){var e=a.extend(!0,{},this.CONFIG,d||{});if(e=this.apply_dimensions_defaults(e),this.is_valid_dimensions(e)){for(var f=this.CONFIG.base_url+e.lang+"/dimensions/"+e.domain_code+"/",g=["base_url","lang","domain_code"],h=!1,i=!0,j=this,k=a.extend(!0,{},d,{datasource:e.datasource,report_code:e.report_code,full:e.full}),l=0;l<g.length;l++)delete k[g[l]];h===!0&&a.each(k,function(a,b){Array.isArray(b)&&(k[a]=b.join(","))}),this.CONFIG.log&&b.info("API.dimensions; request",k);var m=JSON.stringify(a.extend({url:f},k)),n=this.store(m);return void 0===n?c(a.ajax({url:f,traditional:i,data:k,type:"GET"})).then(function(a){try{j.store(m,a)}catch(b){}return a}):c.when(n)}throw 400},d.prototype.is_valid_dimensions=function(a){var c,d=["lang","domain_code"];for(c=0;c<d.length;c+=1)if(void 0===a[d[c]])throw b.error('Parameter "'+d[c]+'" is undefined. Please check your request.'),'Parameter "'+d[c]+'" is undefined. Please check your request.';return this.CONFIG.log&&b.info("API.prototype.is_valid_dimensions",!0),!0},d.prototype.apply_dimensions_defaults=function(a){var c,d,e=["datasource","report_code","lang","domain_code","full"],f={lang:"en",full:"false"};for(c=0;c<Object.keys(f).length;c+=1)"[]"===f[Object.keys(f)[c]]&&(f[Object.keys(f)[c]]=[]);for(c=0;c<e.length;c+=1){d=e[c];try{a[d]=void 0!==a[d]?a[d]:f[d]}catch(g){}}return this.CONFIG.log&&b.info("API.prototype.apply_dimensions",f,e,a),a},d.prototype.codes=function(d){var e=a.extend(!0,{},this.CONFIG,d||{});if(e=this.apply_codes_defaults(e),this.is_valid_codes(e)){for(var f=this.CONFIG.base_url+e.lang+"/codes/"+e.id+"/"+e.domain_code+"/",g=["base_url","lang","id","domain_code"],h=!1,i=!0,j=this,k=a.extend(!0,{},d,{datasource:e.datasource,report_code:e.report_code,whitelist:e.whitelist,blacklist:e.blacklist,show_lists:e.show_lists}),l=0;l<g.length;l++)delete k[g[l]];h===!0&&a.each(k,function(a,b){Array.isArray(b)&&(k[a]=b.join(","))}),this.CONFIG.log&&b.info("API.codes; request",k);var m=JSON.stringify(a.extend({url:f},k)),n=this.store(m);return void 0===n?c(a.ajax({url:f,traditional:i,data:k,type:"GET"})).then(function(a){try{j.store(m,a)}catch(b){}return a}):c.when(n)}throw 400},d.prototype.is_valid_codes=function(a){var c,d=["lang","id","domain_code"];for(c=0;c<d.length;c+=1)if(void 0===a[d[c]])throw b.error('Parameter "'+d[c]+'" is undefined. Please check your request.'),'Parameter "'+d[c]+'" is undefined. Please check your request.';return this.CONFIG.log&&b.info("API.prototype.is_valid_codes",!0),!0},d.prototype.apply_codes_defaults=function(a){var c,d,e=["datasource","domain_code","report_code","lang","id","whitelist","blacklist","show_lists"],f={lang:"en",whitelist:"[]",blacklist:"[]",show_lists:"true"};for(c=0;c<Object.keys(f).length;c+=1)"[]"===f[Object.keys(f)[c]]&&(f[Object.keys(f)[c]]=[]);for(c=0;c<e.length;c+=1){d=e[c];try{a[d]=void 0!==a[d]?a[d]:f[d]}catch(g){}}return this.CONFIG.log&&b.info("API.prototype.apply_codes",f,e,a),a},d.prototype.groups=function(d){var e=a.extend(!0,{},this.CONFIG,d||{});if(e=this.apply_groups_defaults(e),this.is_valid_groups(e)){for(var f=this.CONFIG.base_url+e.lang+"/groups/",g=["base_url","lang"],h=!1,i=!0,j=this,k=a.extend(!0,{},d,{datasource:e.datasource,whitelist:e.whitelist,blacklist:e.blacklist}),l=0;l<g.length;l++)delete k[g[l]];h===!0&&a.each(k,function(a,b){Array.isArray(b)&&(k[a]=b.join(","))}),this.CONFIG.log&&b.info("API.groups; request",k);var m=JSON.stringify(a.extend({url:f},k)),n=this.store(m);return void 0===n?c(a.ajax({url:f,traditional:i,data:k,type:"GET"})).then(function(a){try{j.store(m,a)}catch(b){}return a}):c.when(n)}throw 400},d.prototype.is_valid_groups=function(a){var c,d=["lang"];for(c=0;c<d.length;c+=1)if(void 0===a[d[c]])throw b.error('Parameter "'+d[c]+'" is undefined. Please check your request.'),'Parameter "'+d[c]+'" is undefined. Please check your request.';return this.CONFIG.log&&b.info("API.prototype.is_valid_groups",!0),!0},d.prototype.apply_groups_defaults=function(a){var c,d,e=["datasource","whitelist","blacklist","lang"],f={whitelist:"[]",blacklist:"[]",lang:"en"};for(c=0;c<Object.keys(f).length;c+=1)"[]"===f[Object.keys(f)[c]]&&(f[Object.keys(f)[c]]=[]);for(c=0;c<e.length;c+=1){d=e[c];try{a[d]=void 0!==a[d]?a[d]:f[d]}catch(g){}}return this.CONFIG.log&&b.info("API.prototype.apply_groups",f,e,a),a},d.prototype.domains=function(d){var e=a.extend(!0,{},this.CONFIG,d||{});if(e=this.apply_domains_defaults(e),this.is_valid_domains(e)){for(var f=this.CONFIG.base_url+e.lang+"/domains/"+e.group_code+"/",g=["base_url","lang","group_code"],h=!1,i=!0,j=this,k=a.extend(!0,{},d,{datasource:e.datasource,whitelist:e.whitelist,blacklist:e.blacklist}),l=0;l<g.length;l++)delete k[g[l]];h===!0&&a.each(k,function(a,b){Array.isArray(b)&&(k[a]=b.join(","))}),this.CONFIG.log&&b.info("API.domains; request",k);var m=JSON.stringify(a.extend({url:f},k)),n=this.store(m);return void 0===n?c(a.ajax({url:f,traditional:i,data:k,type:"GET"})).then(function(a){try{j.store(m,a)}catch(b){}return a}):c.when(n)}throw 400},d.prototype.is_valid_domains=function(a){var c,d=["lang","group_code"];for(c=0;c<d.length;c+=1)if(void 0===a[d[c]])throw b.error('Parameter "'+d[c]+'" is undefined. Please check your request.'),'Parameter "'+d[c]+'" is undefined. Please check your request.';return this.CONFIG.log&&b.info("API.prototype.is_valid_domains",!0),!0},d.prototype.apply_domains_defaults=function(a){var c,d,e=["datasource","lang","group_code","whitelist","blacklist"],f={lang:"en",whitelist:"[]",blacklist:"[]"};for(c=0;c<Object.keys(f).length;c+=1)"[]"===f[Object.keys(f)[c]]&&(f[Object.keys(f)[c]]=[]);for(c=0;c<e.length;c+=1){d=e[c];try{a[d]=void 0!==a[d]?a[d]:f[d]}catch(g){}}return this.CONFIG.log&&b.info("API.prototype.apply_domains",f,e,a),a},d.prototype.bulkdownloads=function(d){var e=a.extend(!0,{},this.CONFIG,d||{});if(e=this.apply_bulkdownloads_defaults(e),this.is_valid_bulkdownloads(e)){for(var f=this.CONFIG.base_url+e.lang+"/bulkdownloads/"+e.domain_code+"/",g=["base_url","lang","domain_code"],h=!1,i=!0,j=this,k=a.extend(!0,{},d,{datasource:e.datasource}),l=0;l<g.length;l++)delete k[g[l]];h===!0&&a.each(k,function(a,b){Array.isArray(b)&&(k[a]=b.join(","))}),this.CONFIG.log&&b.info("API.bulkdownloads; request",k);var m=JSON.stringify(a.extend({url:f},k)),n=this.store(m);return void 0===n?c(a.ajax({url:f,traditional:i,data:k,type:"GET"})).then(function(a){try{j.store(m,a)}catch(b){}return a}):c.when(n)}throw 400},d.prototype.is_valid_bulkdownloads=function(a){var c,d=["lang","domain_code"];for(c=0;c<d.length;c+=1)if(void 0===a[d[c]])throw b.error('Parameter "'+d[c]+'" is undefined. Please check your request.'),'Parameter "'+d[c]+'" is undefined. Please check your request.';return this.CONFIG.log&&b.info("API.prototype.is_valid_bulkdownloads",!0),!0},d.prototype.apply_bulkdownloads_defaults=function(a){var c,d,e=["datasource","lang","domain_code"],f={lang:"en"};for(c=0;c<Object.keys(f).length;c+=1)"[]"===f[Object.keys(f)[c]]&&(f[Object.keys(f)[c]]=[]);for(c=0;c<e.length;c+=1){d=e[c];try{a[d]=void 0!==a[d]?a[d]:f[d]}catch(g){}}return this.CONFIG.log&&b.info("API.prototype.apply_bulkdownloads",f,e,a),a},d.prototype.documents=function(d){var e=a.extend(!0,{},this.CONFIG,d||{});if(e=this.apply_documents_defaults(e),this.is_valid_documents(e)){for(var f=this.CONFIG.base_url+e.lang+"/documents/"+e.domain_code+"/",g=["base_url","lang","domain_code"],h=!1,i=!0,j=this,k=a.extend(!0,{},d,{datasource:e.datasource}),l=0;l<g.length;l++)delete k[g[l]];h===!0&&a.each(k,function(a,b){Array.isArray(b)&&(k[a]=b.join(","))}),this.CONFIG.log&&b.info("API.documents; request",k);var m=JSON.stringify(a.extend({url:f},k)),n=this.store(m);return void 0===n?c(a.ajax({url:f,traditional:i,data:k,type:"GET"})).then(function(a){try{j.store(m,a)}catch(b){}return a}):c.when(n)}throw 400},d.prototype.is_valid_documents=function(a){var c,d=["lang","domain_code"];for(c=0;c<d.length;c+=1)if(void 0===a[d[c]])throw b.error('Parameter "'+d[c]+'" is undefined. Please check your request.'),'Parameter "'+d[c]+'" is undefined. Please check your request.';return this.CONFIG.log&&b.info("API.prototype.is_valid_documents",!0),!0},d.prototype.apply_documents_defaults=function(a){var c,d,e=["datasource","lang","domain_code"],f={lang:"en"};for(c=0;c<Object.keys(f).length;c+=1)"[]"===f[Object.keys(f)[c]]&&(f[Object.keys(f)[c]]=[]);for(c=0;c<e.length;c+=1){d=e[c];try{a[d]=void 0!==a[d]?a[d]:f[d]}catch(g){}}return this.CONFIG.log&&b.info("API.prototype.apply_documents",f,e,a),a},d.prototype.suggestions=function(d){var e=a.extend(!0,{},this.CONFIG,d||{});if(e=this.apply_suggestions_defaults(e),this.is_valid_suggestions(e)){for(var f=this.CONFIG.base_url+e.lang+"/suggestions",g=["base_url","lang"],h=!1,i=!0,j=this,k=a.extend(!0,{},d,{datasource:e.datasource,q:e.q}),l=0;l<g.length;l++)delete k[g[l]];h===!0&&a.each(k,function(a,b){Array.isArray(b)&&(k[a]=b.join(","))}),this.CONFIG.log&&b.info("API.suggestions; request",k);var m=JSON.stringify(a.extend({url:f},k)),n=this.store(m);return void 0===n?c(a.ajax({url:f,traditional:i,data:k,type:"GET"})).then(function(a){try{j.store(m,a)}catch(b){}return a}):c.when(n)}throw 400},d.prototype.is_valid_suggestions=function(a){var c,d=["lang","q"];for(c=0;c<d.length;c+=1)if(void 0===a[d[c]])throw b.error('Parameter "'+d[c]+'" is undefined. Please check your request.'),'Parameter "'+d[c]+'" is undefined. Please check your request.';return this.CONFIG.log&&b.info("API.prototype.is_valid_suggestions",!0),!0},d.prototype.apply_suggestions_defaults=function(a){var c,d,e=["datasource","lang","q"],f={lang:"en"};for(c=0;c<Object.keys(f).length;c+=1)"[]"===f[Object.keys(f)[c]]&&(f[Object.keys(f)[c]]=[]);for(c=0;c<e.length;c+=1){d=e[c];try{a[d]=void 0!==a[d]?a[d]:f[d]}catch(g){}}return this.CONFIG.log&&b.info("API.prototype.apply_suggestions",f,e,a),a},d.prototype.search=function(d){var e=a.extend(!0,{},this.CONFIG,d||{});if(e=this.apply_search_defaults(e),this.is_valid_search(e)){for(var f=this.CONFIG.base_url+e.lang+"/search",g=["base_url","lang"],h=!1,i=!0,j=this,k=a.extend(!0,{},d,{datasource:e.datasource,q:e.q}),l=0;l<g.length;l++)delete k[g[l]];h===!0&&a.each(k,function(a,b){Array.isArray(b)&&(k[a]=b.join(","))}),this.CONFIG.log&&b.info("API.search; request",k);var m=JSON.stringify(a.extend({url:f},k)),n=this.store(m);return void 0===n?c(a.ajax({url:f,traditional:i,data:k,type:"GET"})).then(function(a){try{j.store(m,a)}catch(b){}return a}):c.when(n)}throw 400},d.prototype.is_valid_search=function(a){var c,d=["lang","q"];for(c=0;c<d.length;c+=1)if(void 0===a[d[c]])throw b.error('Parameter "'+d[c]+'" is undefined. Please check your request.'),'Parameter "'+d[c]+'" is undefined. Please check your request.';return this.CONFIG.log&&b.info("API.prototype.is_valid_search",!0),!0},d.prototype.apply_search_defaults=function(a){var c,d,e=["datasource","lang","q"],f={lang:"en"};for(c=0;c<Object.keys(f).length;c+=1)"[]"===f[Object.keys(f)[c]]&&(f[Object.keys(f)[c]]=[]);for(c=0;c<e.length;c+=1){d=e[c];try{a[d]=void 0!==a[d]?a[d]:f[d]}catch(g){}}return this.CONFIG.log&&b.info("API.prototype.apply_search",f,e,a),a},d.prototype.metadata=function(d){var e=a.extend(!0,{},this.CONFIG,d||{});if(e=this.apply_metadata_defaults(e),this.is_valid_metadata(e)){for(var f=this.CONFIG.base_url+e.lang+"/metadata/"+e.domain_code,g=["base_url","lang","domain_code"],h=!1,i=!0,j=this,k=a.extend(!0,{},d,{datasource:e.datasource}),l=0;l<g.length;l++)delete k[g[l]];h===!0&&a.each(k,function(a,b){Array.isArray(b)&&(k[a]=b.join(","))}),this.CONFIG.log&&b.info("API.metadata; request",k);var m=JSON.stringify(a.extend({url:f},k)),n=this.store(m);return void 0===n?c(a.ajax({url:f,traditional:i,data:k,type:"GET"})).then(function(a){try{j.store(m,a)}catch(b){}return a}):c.when(n)}throw 400},d.prototype.is_valid_metadata=function(a){var c,d=["lang","domain_code"];for(c=0;c<d.length;c+=1)if(void 0===a[d[c]])throw b.error('Parameter "'+d[c]+'" is undefined. Please check your request.'),'Parameter "'+d[c]+'" is undefined. Please check your request.';return this.CONFIG.log&&b.info("API.prototype.is_valid_metadata",!0),!0},d.prototype.apply_metadata_defaults=function(a){var c,d,e=["datasource","lang"],f={lang:"en"};for(c=0;c<Object.keys(f).length;c+=1)"[]"===f[Object.keys(f)[c]]&&(f[Object.keys(f)[c]]=[]);for(c=0;c<e.length;c+=1){d=e[c];try{a[d]=void 0!==a[d]?a[d]:f[d]}catch(g){}}return this.CONFIG.log&&b.info("API.prototype.apply_metadata",f,e,a),a},d.prototype.definitions_types=function(d){var e=a.extend(!0,{},this.CONFIG,d||{});if(e=this.apply_definitions_types_defaults(e),this.is_valid_definitions_types(e)){for(var f=this.CONFIG.base_url+e.lang+"/definitions/types",g=["base_url","lang"],h=!1,i=!0,j=this,k=a.extend(!0,{},d,{datasource:e.datasource}),l=0;l<g.length;l++)delete k[g[l]];h===!0&&a.each(k,function(a,b){Array.isArray(b)&&(k[a]=b.join(","))}),this.CONFIG.log&&b.info("API.definitions_types; request",k);var m=JSON.stringify(a.extend({url:f},k)),n=this.store(m);return void 0===n?c(a.ajax({url:f,traditional:i,data:k,type:"GET"})).then(function(a){try{j.store(m,a)}catch(b){}return a}):c.when(n)}throw 400},d.prototype.is_valid_definitions_types=function(a){var c,d=["lang"];for(c=0;c<d.length;c+=1)if(void 0===a[d[c]])throw b.error('Parameter "'+d[c]+'" is undefined. Please check your request.'),'Parameter "'+d[c]+'" is undefined. Please check your request.';return this.CONFIG.log&&b.info("API.prototype.is_valid_definitions_types",!0),!0},d.prototype.apply_definitions_types_defaults=function(a){var c,d,e=["datasource","lang"],f={lang:"en"};for(c=0;c<Object.keys(f).length;c+=1)"[]"===f[Object.keys(f)[c]]&&(f[Object.keys(f)[c]]=[]);for(c=0;c<e.length;c+=1){d=e[c];try{a[d]=void 0!==a[d]?a[d]:f[d]}catch(g){}}return this.CONFIG.log&&b.info("API.prototype.apply_definitions_types",f,e,a),a},d.prototype.definitions_by_type=function(d){var e=a.extend(!0,{},this.CONFIG,d||{});if(e=this.apply_definitions_by_type_defaults(e),this.is_valid_definitions_by_type(e)){for(var f=this.CONFIG.base_url+e.lang+"/definitions/types/"+e.type,g=["base_url","lang","type"],h=!1,i=!0,j=this,k=a.extend(!0,{},d,{datasource:e.datasource}),l=0;l<g.length;l++)delete k[g[l]];h===!0&&a.each(k,function(a,b){Array.isArray(b)&&(k[a]=b.join(","))}),this.CONFIG.log&&b.info("API.definitions_by_type; request",k);var m=JSON.stringify(a.extend({url:f},k)),n=this.store(m);return void 0===n?c(a.ajax({url:f,traditional:i,data:k,type:"GET"})).then(function(a){try{j.store(m,a)}catch(b){}return a}):c.when(n)}throw 400},d.prototype.is_valid_definitions_by_type=function(a){var c,d=["lang","type"];for(c=0;c<d.length;c+=1)if(void 0===a[d[c]])throw b.error('Parameter "'+d[c]+'" is undefined. Please check your request.'),'Parameter "'+d[c]+'" is undefined. Please check your request.';return this.CONFIG.log&&b.info("API.prototype.is_valid_definitions_by_type",!0),!0},d.prototype.apply_definitions_by_type_defaults=function(a){var c,d,e=["datasource","lang","type"],f={lang:"en"};for(c=0;c<Object.keys(f).length;c+=1)"[]"===f[Object.keys(f)[c]]&&(f[Object.keys(f)[c]]=[]);for(c=0;c<e.length;c+=1){d=e[c];try{a[d]=void 0!==a[d]?a[d]:f[d]}catch(g){}}return this.CONFIG.log&&b.info("API.prototype.apply_definitions_by_type",f,e,a),a},d.prototype.definitions_domain=function(d){var e=a.extend(!0,{},this.CONFIG,d||{});if(e=this.apply_definitions_domain_defaults(e),this.is_valid_definitions_domain(e)){for(var f=this.CONFIG.base_url+e.lang+"/definitions/domain/"+e.domain_code,g=["base_url","lang","domain_code"],h=!1,i=!0,j=this,k=a.extend(!0,{},d,{datasource:e.datasource}),l=0;l<g.length;l++)delete k[g[l]];h===!0&&a.each(k,function(a,b){Array.isArray(b)&&(k[a]=b.join(","))}),this.CONFIG.log&&b.info("API.definitions_domain; request",k);var m=JSON.stringify(a.extend({url:f},k)),n=this.store(m);return void 0===n?c(a.ajax({url:f,traditional:i,data:k,type:"GET"})).then(function(a){try{j.store(m,a)}catch(b){}return a}):c.when(n)}throw 400},d.prototype.is_valid_definitions_domain=function(a){var c,d=["lang","domain_code"];for(c=0;c<d.length;c+=1)if(void 0===a[d[c]])throw b.error('Parameter "'+d[c]+'" is undefined. Please check your request.'),'Parameter "'+d[c]+'" is undefined. Please check your request.';return this.CONFIG.log&&b.info("API.prototype.is_valid_definitions_domain",!0),!0},d.prototype.apply_definitions_domain_defaults=function(a){var c,d,e=["datasource","lang","domain_code"],f={lang:"en"};for(c=0;c<Object.keys(f).length;c+=1)"[]"===f[Object.keys(f)[c]]&&(f[Object.keys(f)[c]]=[]);for(c=0;c<e.length;c+=1){d=e[c];try{a[d]=void 0!==a[d]?a[d]:f[d]}catch(g){}}return this.CONFIG.log&&b.info("API.prototype.apply_definitions_domain",f,e,a),a},d.prototype.definitions_domain_by_type=function(d){var e=a.extend(!0,{},this.CONFIG,d||{});if(e=this.apply_definitions_domain_by_type_defaults(e),this.is_valid_definitions_domain_by_type(e)){for(var f=this.CONFIG.base_url+e.lang+"/definitions/domain/"+e.domain_code+"/"+e.type,g=["base_url","lang","domain_code","type"],h=!1,i=!0,j=this,k=a.extend(!0,{},d,{datasource:e.datasource,output_type:e.output_type}),l=0;l<g.length;l++)delete k[g[l]];h===!0&&a.each(k,function(a,b){Array.isArray(b)&&(k[a]=b.join(","))}),this.CONFIG.log&&b.info("API.definitions_domain_by_type; request",k);var m=JSON.stringify(a.extend({url:f},k)),n=this.store(m);return void 0===n?c(a.ajax({url:f,traditional:i,data:k,type:"GET"})).then(function(a){try{j.store(m,a)}catch(b){}return a}):c.when(n)}throw 400},d.prototype.is_valid_definitions_domain_by_type=function(a){var c,d=["lang","domain_code","type"];for(c=0;c<d.length;c+=1)if(void 0===a[d[c]])throw b.error('Parameter "'+d[c]+'" is undefined. Please check your request.'),'Parameter "'+d[c]+'" is undefined. Please check your request.';return this.CONFIG.log&&b.info("API.prototype.is_valid_definitions_domain_by_type",!0),!0},d.prototype.apply_definitions_domain_by_type_defaults=function(a){var c,d,e=["datasource","output_type","lang","domain_code","type"],f={output_type:"objects",lang:"en"};for(c=0;c<Object.keys(f).length;c+=1)"[]"===f[Object.keys(f)[c]]&&(f[Object.keys(f)[c]]=[]);for(c=0;c<e.length;c+=1){d=e[c];try{a[d]=void 0!==a[d]?a[d]:f[d]}catch(g){}}return this.CONFIG.log&&b.info("API.prototype.apply_definitions_domain_by_type",f,e,a),a},d.prototype.data=function(d){var e=a.extend(!0,{},this.CONFIG,d||{});if(e=this.apply_data_defaults(e),this.is_valid_data(e)){for(var f=this.CONFIG.base_url+e.lang+"/data/"+e.domain_code,g=["base_url","lang","domain_code"],h=!0,i=!0,j=this,k=a.extend(!0,{},d,{datasource:e.datasource,output_type:e.output_type}),l=0;l<g.length;l++)delete k[g[l]];h===!0&&a.each(k,function(a,b){Array.isArray(b)&&(k[a]=b.join(","))}),this.CONFIG.log&&b.info("API.data; request",k);var m=JSON.stringify(a.extend({url:f},k)),n=this.store(m);return void 0===n?c(a.ajax({url:f,traditional:i,data:k,type:"GET"})).then(function(a){try{j.store(m,a)}catch(b){}return a}):c.when(n)}throw 400},d.prototype.is_valid_data=function(a){var c,d=["lang","domain_code"];for(c=0;c<d.length;c+=1)if(void 0===a[d[c]])throw b.error('Parameter "'+d[c]+'" is undefined. Please check your request.'),'Parameter "'+d[c]+'" is undefined. Please check your request.';return this.CONFIG.log&&b.info("API.prototype.is_valid_data",!0),!0},d.prototype.apply_data_defaults=function(a){var c,d,e=["datasource","output_type","lang"],f={output_type:"objects",lang:"en"};for(c=0;c<Object.keys(f).length;c+=1)"[]"===f[Object.keys(f)[c]]&&(f[Object.keys(f)[c]]=[]);for(c=0;c<e.length;c+=1){d=e[c];try{a[d]=void 0!==a[d]?a[d]:f[d]}catch(g){}}return this.CONFIG.log&&b.info("API.prototype.apply_data",f,e,a),a},d.prototype.store=function(a,c){if(!this.CONFIG.hasOwnProperty("mode")||"dev"!==this.CONFIG.mode){var d=3e5;return void 0!==c?(this.CONFIG.log&&b.info("Stored",a),amplify.store(a,c,d)):(this.CONFIG.log&&b.info("Get Stored",a),amplify.store(a))}},new d});